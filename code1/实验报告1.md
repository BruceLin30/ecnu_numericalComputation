# **华东师范大学计算机科学技术系实验报告**

| **实验课程**：  嵌入式原理     | **年级**：  2019        | **实验成绩**：             |
| ------------------------------ | ----------------------- | -------------------------- |
| **实验名称**：  嵌入式原理实验 | **姓名**：  林子炫      |                            |
| **实验编号**：  1              | **学号**：  10195102468 | **实验日期**：  2021-10-09 |
| **指导教师**：  沈建华         | **组号**：              | **实验时间**：  9：00AM    |

## 1 实验目的

> 模仿Lab_02_01示例程序，统计自己学号中奇数数字的个数，学号以ASCII的形式存储并以\$号作为结束符，字符以字节为单位存储。（关于ASCII表，'0'对应（0x30），'9'对应（0x39），'$'对应（0x24））

## 2 实验过程

我们需要实现找出字符串中奇数的数量，这里实现的思路是对取出的数字和1进行逻辑与运算操作，如果是奇数，所得出的结果必定还是1，所以接下来只需对其和1进行比较，如果相等，则`ADD R7,#1`，如果不相等，则跳转到NEXT进入下一次判断。

所以主要的增改部分为：

```assembly
	AND R4,#1
	CMP R4,#1
	BNE NEXT
```

源码如下：

```assembly
	AREA Reset,Data,READONLY	;Reset为默认的入口地址
	DCD 0x20000100				;首4个字节被分配给了堆栈指针SP
	DCD	Reset_Handler			;后4个字节内容减一分配给了PC
	AREA CODE_SEGMENT,CODE,READONLY
Reset_Handler proc
	export Reset_Handler [weak]
	LDR R0,=ARRAY		;R0保存数组首地址
	MOV R1,#0
	MOV R3,#0
	MOV R7,#0		;保存统计数字结果	
LOOP
	LDR R2,[R0,R1]		;将存储器地址为R0+R1的字数据读入寄存器R2
	ADD R1,#4
NEXT
	CMP R2,#0
	BEQ LOOP
	MOV R4,R2
	MOV R2,R2,LSR#8
	AND R4,#0x000000FF
	CMP R4,#0x24	;'$'
	BEQ EXIT
	AND R4,#1
	CMP R4,#1
	BNE NEXT
	ADD R7,#1		;统计奇数位的数字的数量
	B NEXT

EXIT
	NOP
	ENDP
ARRAY	DCB "10195102468$"
	END
```



## 4 对汇编指令的理解

结尾部分在判断到出现\$后进入死循环：

```assembly
EXIT
	NOP
	ENDP
```



## 3 总结







